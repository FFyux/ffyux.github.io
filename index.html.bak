<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diaporama Dropbox</title>
</head>
<body>
    <div class="slideshow-container" id="slideshow-container"></div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Access Token Dropbox
            var accessToken = 'sl.BnTXQ-P_8TPgkhP-ojPHtgL47LEtWrkQKXFV-qvf5iW9HRKIjc4bU3ff2ujol-1lRZBiNl72rq4BMuIURuvidF22IRONZXqAtX0Bn_M9yRPf7LmK6Tc1OhN9UZ7sdKUtLqPq-QzoVHRks-U';

            // Répertoire Dropbox
            var folderPath = '/Affiches/';

            // URL de base pour les liens publics Dropbox
            var baseUrl = 'https://www.dropbox.com/s/';

            // Appel à l'API Dropbox pour lister les fichiers du dossier
            var xhr = new XMLHttpRequest();
            xhr.open('POST', 'https://api.dropboxapi.com/2/files/list_folder');
            xhr.setRequestHeader('Authorization', 'Bearer ' + accessToken);
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.onload = function() {
                if (xhr.status === 200) {
                    var response = JSON.parse(xhr.responseText);
                    var entries = response.entries;

                    var slideshowContainer = document.getElementById('slideshow-container');

                    entries.forEach(function(entry) {
                        if (entry['.tag'] === 'file' && entry.name.endsWith('.jpg')) {
                            var imageUrl = baseUrl + entry.id + '/' + entry.name;
                            var slide = document.createElement('div');
                            slide.className = 'slide fade';
                            slide.innerHTML = '<img src="' + imageUrl + '" style="width:100%">';
                            slideshowContainer.appendChild(slide);
                        }
                    });
                }
            };
            xhr.send(JSON.stringify({
                path: folderPath,
                recursive: false,
                include_media_info: false,
                include_deleted: false,
                include_has_explicit_shared_members: false,
                include_mounted_folders: true
            }));
        });
    </script>
</body>
</html>